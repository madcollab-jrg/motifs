motif_level3_sum <- um_level3 %>%
group_by(motif,type) %>%
summarize(
distinct_users = length(unique(user_id)),
motif_count = length(motif)
)
motif_level3_sum <- motif_level3_sum[which(motif_level3_sum$distinct_users>1),]
### Compute l3 motif tfidf at different types
motif_level3_sum_tfidf <- motif_level3_sum %>% bind_tf_idf(motif, type, motif_count)
#### Level 4
um_level4 <- user_motifs[which(user_motifs$level==4),]
motif_level4_sum <- um_level4 %>%
group_by(motif,type) %>%
summarize(
distinct_users = length(unique(user_id)),
motif_count = length(motif)
)
motif_level4_sum <- motif_level4_sum[which(motif_level4_sum$distinct_users>1),]
### Compute l4 motif tfidf at different types
motif_level4_sum_tfidf <- motif_level4_sum %>% bind_tf_idf(motif, type, motif_count)
View(motif_level2_sum)
View(um_level2)
View(um_level2)
View(motif_level_status_sum)
View(motif_level1_sum)
View(motif_level1_sum_tfidf)
tibble(motif_level_sum_tfidf) %>%
kable() %>%
kable_styling(full_width = F) %>%
scroll_box(width = "800px", height = "500px")
tibble(motif_type_sum_tfidf) %>%
kable() %>%
kable_styling(full_width = F) %>%
scroll_box(width = "800px", height = "500px")
View(um_level1)
View(user_motifs)
# load packages and data
library(readr)
library(dplyr)
library(DT)
library(tidytext)
library(forcats)
library(ggplot2)
library(kableExtra)
# Set objects
experts <- c("uber_pye","areeda","mzevin1","RF45","jrsmith02","sbc538")
collaborators <- c("adamamiller","olipatane","smarttiz","jafeldt","mcoughlin","citizenscientist1994","cjackso3",
"camallen","lmp579","sciencejedi","crowston","Carsten","jessiemcd","ejm553","srallen",
"costerlu@syr.edu","lcalian","joeykey","matsoulina","trouille","zooniverse")
moderators <- c("achilles308","futurewaves","wavewavewave","EcceruElme")
# Data on research drive folder /Volumes/cbjackson2/motif. Remeber to connect to VPN and mount drive
user_motifs <- read_csv("/Volumes/cbjackson2/motif/user_level_motif.csv")
user_motifs <- user_motifs[which(!user_motifs$type %in% c("otheruser","superuser") ),]
user_motifs$type <- recode(user_motifs$type, promoted = "promoted", detractor = "notpromoted",.default = NA_character_)
user_motifs$user_id <- as.factor(user_motifs$user_id)
########################  Add classification accuracy and total activities
user_performance <- read_csv("/Volumes/cbjackson2/motif/user_performance.csv")
user_performance[,c(1,9:10)] <- NULL
names(user_performance)[c(1,3,4)] <- c("user_id","start_session","end_session")
user_performance$user_id <- as.factor(user_performance$user_id)
# load packages and data
library(readr)
library(dplyr)
library(DT)
library(tidytext)
library(forcats)
library(ggplot2)
library(kableExtra)
# Set objects
experts <- c("uber_pye","areeda","mzevin1","RF45","jrsmith02","sbc538")
collaborators <- c("adamamiller","olipatane","smarttiz","jafeldt","mcoughlin","citizenscientist1994","cjackso3",
"camallen","lmp579","sciencejedi","crowston","Carsten","jessiemcd","ejm553","srallen",
"costerlu@syr.edu","lcalian","joeykey","matsoulina","trouille","zooniverse")
moderators <- c("achilles308","futurewaves","wavewavewave","EcceruElme")
# Data on research drive folder /Volumes/cbjackson2/motif. Remeber to connect to VPN and mount drive
user_motifs <- read_csv("/Volumes/cbjackson2/motif/user_level_motif.csv")
user_motifs <- user_motifs[which(!user_motifs$type %in% c("otheruser","superuser") ),]
user_motifs$type <- recode(user_motifs$type, promoted = "promoted", detractor = "notpromoted",.default = NA_character_)
user_motifs$user_id <- as.factor(user_motifs$user_id)
########################  Add classification accuracy and total activities
user_performance <- read_csv("/Volumes/cbjackson2/motif/user_performance.csv")
user_performance[,c(1,9:10)] <- NULL
names(user_performance)[c(1,3,4)] <- c("user_id","start_session","end_session")
user_performance$user_id <- as.factor(user_performance$user_id)
View(user_performance)
View(user_motifs)
# What modes of action. How many different motifs are present for a volunteer
user_summary_sets <- user_motifs %>%
group_by(user_id) %>%
summarize(
distinct_set = length(unique(set1)),
total_sets = length(set1),
set_diversiy = total_sets/distinct_set
)
### ALL MOTIFS
user_level_sets <- user_motifs %>%
group_by(user_id,level) %>%
summarize(
distinct_set = length(unique(set1)),
total_sets = length(set1),
set_diversiy = total_sets/distinct_set,
sessions = length(unique(start_time))
)
##### LEVEL 1 MOTIFS #####
library(data.table)
l1user_sets <-  data.table(user_level_sets[which(user_level_sets$level==1),])
l1user_sets <- l1user_sets %>%  select(user_id, level, distinct_set, total_sets) %>%
mutate(
distinct_sets.s = scale(distinct_set),
total_sets.s = scale(total_sets),
sets_diversity.s = scale(total_sets),
sets_diversity.s2 = total_sets.s*distinct_sets.s,
average.z = (distinct_sets.s + (total_sets.s)) / 2
)
### ALL MOTIFS BY TYPE
user_level_type_sets <- user_motifs %>%
group_by(user_id,level,type) %>%
summarize(
distinct_sets = length(unique(set1)),
total_sets = length(set1),
set_diversiy = total_sets/distinct_sets
)
library(data.table)
l1usertype_sets <-  data.table(user_level_type_sets[which(user_level_type_sets$level==1),])
l1usertype_sets <- l1usertype_sets %>%  select(user_id, level, distinct_sets, total_sets, type) %>%
mutate(
distinct_sets.s = scale(distinct_sets),
total_sets.s = scale(total_sets),
sets_diversity.s = scale(total_sets),
sets_diversity.s2 = total_sets.s*distinct_sets.s,
average.z = (distinct_sets.s + (total_sets.s)) / 2
)
### ALL MOTIFS BY USER in L1
allL1sets <- user_motifs[which(user_motifs$level==1),]
allL1_summary <- allL1sets %>%
group_by(user_id,type) %>%
summarize(
start_level = min(start_time),
distinct_sets = length(unique(set1)),
total_sets = length(set1),
set_diversiy = total_sets/distinct_sets
)
allL1_sets_type_summary <- allL1sets %>%
group_by(user_id,set1,type) %>%
summarize(
total_sets = length(set1)
)
allL1_set_summary <- allL1sets %>%
group_by(user_id,set1,type) %>%
summarize(
first_l1set = min(start_time),
last_l1set = max(start_time),
distinct_motif_combinations = length(unique(motif)),
total_motif = length(motif)
)
allL1_set_summary$level_time <- difftime(allL1_set_summary$last_l1set,allL1_set_summary$first_l1set,units = "days")
View(allL1_set_summary)
View(allL1_sets_type_summary)
View(allL1_summary)
View(l1user_sets)
View(l1usertype_sets)
View(user_level_type_sets)
View(user_motifs)
View(user_performance)
View(user_summary_sets)
View()allL1_set_summary
View(allL1_set_summary)
allL1_set_summary$level_time <- difftime(allL1_set_summary$last_l1set,allL1_set_summary$first_l1set,units = "hours")
View(allL1_set_summary)
allL1_set_summary$level_time <- difftime(allL1_set_summary$last_l1set,allL1_set_summary$first_l1set,units = "minutes")
allL1_set_summary$level_time <- difftime(allL1_set_summary$last_l1set,allL1_set_summary$first_l1set,units = "mins")
View(allL1_set_summary)
View(allL1_summary)
View(user_level_type_sets)
View(user_level_type_sets)
View(user_summary_sets)
user_summary_sets <- user_motifs %>%
group_by(user_id) %>%
summarize(
distinct_set = length(unique(set1)),
total_sets = length(set1),
set_diversiy = total_sets/distinct_set,
first_l1set = min(start_time),
last_l1set = max(start_time),
) %>%
mutate(level_time =  difftime(allL1_set_summary$last_l1set,allL1_set_summary$first_l1set,units = "mins"))
user_summary_sets <- user_motifs %>%
group_by(user_id) %>%
summarize(
distinct_set = length(unique(set1)),
total_sets = length(set1),
set_diversiy = total_sets/distinct_set,
first_l1set = min(start_time),
last_l1set = max(start_time),
) %>%
mutate(level_time =  difftime(last_l1set,first_l1set,units = "mins"))
View(user_summary_sets)
# What modes of action. How many different motifs are present for a volunteer
user_summary_sets <- user_motifs %>%
group_by(user_id) %>%
summarize(
distinct_set = length(unique(set1)),
total_sets = length(set1),
set_diversiy = total_sets/distinct_set)
### ALL MOTIFS
user_level_sets <- user_motifs %>%
group_by(user_id,level) %>%
summarize(
distinct_set = length(unique(set1)),
total_sets = length(set1),
set_diversiy = total_sets/distinct_set,
sessions = length(unique(start_time)),
first_l1set = min(start_time),
last_l1set = max(start_time),
) %>%
mutate(level_time =  difftime(last_l1set,first_l1set,units = "mins"))
View(user_level_sets)
View(user_summary_sets)
View(user_motifs)
table(unique(user_motifs$first))
setwd("~/Library/CloudStorage/Box-Box/_researchout/motifs")
setwd("/Users/coreyjackson/Library/CloudStorage/Box-Box/_researchout/motifs")
/Users/coreyjackson/Library/CloudStorage/Box-Box/
setwd("/Users/coreyjackson/Library/CloudStorage/Box-Box/_researchout/motifs")
ls
# load packages and data
library(readr)
library(dplyr)
library(DT)
library(tidytext)
library(forcats)
library(ggplot2)
library(kableExtra)
# Set objects
experts <- c("uber_pye","areeda","mzevin1","RF45","jrsmith02","sbc538")
collaborators <- c("adamamiller","olipatane","smarttiz","jafeldt","mcoughlin","citizenscientist1994","cjackso3",
"camallen","lmp579","sciencejedi","crowston","Carsten","jessiemcd","ejm553","srallen",
"costerlu@syr.edu","lcalian","joeykey","matsoulina","trouille","zooniverse")
moderators <- c("achilles308","futurewaves","wavewavewave","EcceruElme")
# Data on research drive folder /Volumes/cbjackson2/motif. Remeber to connect to VPN and mount drive
user_motifs <- read_csv("/Volumes/cbjackson2/motif/user_level_motif.csv")
user_motifs <- user_motifs[which(!user_motifs$type %in% c("otheruser","superuser") ),]
user_motifs$type <- recode(user_motifs$type, promoted = "promoted", detractor = "notpromoted",.default = NA_character_)
user_motifs$user_id <- as.factor(user_motifs$user_id)
########################  Add classification accuracy and total activities
user_performance <- read_csv("/Volumes/cbjackson2/motif/user_performance.csv")
user_performance[,c(1,9:10)] <- NULL
names(user_performance)[c(1,3,4)] <- c("user_id","start_session","end_session")
user_performance$user_id <- as.factor(user_performance$user_id)
setwd("/Users/coreyjackson/Library/CloudStorage/Box-Box/_researchout/motifs")
![setup for motifs]("motif-setup.png")
knitr::include_graphics("motif-setup.png")
knitr::include_graphics("motif-setup.png")
knitr::include_graphics("motif-setup.png")
knitr::include_graphics("/Users/coreyjackson/Library/CloudStorage/Box-Box/_researchout/motifs/motif-setup.png")
knitr::include_graphics("~/Users/coreyjackson/Library/CloudStorage/Box-Box/_researchout/motifs/motif-setup.png")
knitr::include_graphics("motif-setup.png")
knitr::include_graphics("./motif-setup.pdf")
knitr::include_graphics("motif-setup.jpg")
setwd("~/Desktop/GitHub Code/motifs")
knitr::include_graphics("~/Desktop/GitHub Code/motifs/motif-setup.jpg")
# Chunk 1: setup
# load packages and data
library(readr)
library(dplyr)
library(DT)
library(tidytext)
library(forcats)
library(ggplot2)
library(kableExtra)
# Set objects
experts <- c("uber_pye","areeda","mzevin1","RF45","jrsmith02","sbc538")
collaborators <- c("adamamiller","olipatane","smarttiz","jafeldt","mcoughlin","citizenscientist1994","cjackso3",
"camallen","lmp579","sciencejedi","crowston","Carsten","jessiemcd","ejm553","srallen",
"costerlu@syr.edu","lcalian","joeykey","matsoulina","trouille","zooniverse")
moderators <- c("achilles308","futurewaves","wavewavewave","EcceruElme")
# Data on research drive folder /Volumes/cbjackson2/motif. Remeber to connect to VPN and mount drive
user_motifs <- read_csv("/Volumes/cbjackson2/motif/user_level_motif.csv")
user_motifs <- user_motifs[which(!user_motifs$type %in% c("otheruser","superuser") ),]
user_motifs$type <- recode(user_motifs$type, promoted = "promoted", detractor = "notpromoted",.default = NA_character_)
user_motifs$user_id <- as.factor(user_motifs$user_id)
########################  Add classification accuracy and total activities
user_performance <- read_csv("/Volumes/cbjackson2/motif/user_performance.csv")
user_performance[,c(1,9:10)] <- NULL
names(user_performance)[c(1,3,4)] <- c("user_id","start_session","end_session")
user_performance$user_id <- as.factor(user_performance$user_id)
setwd("~/Desktop/GitHub Code/motifs")
# Chunk 1: setup
# load packages and data
library(readr)
library(dplyr)
library(DT)
library(tidytext)
library(forcats)
library(ggplot2)
library(kableExtra)
# Set objects
experts <- c("uber_pye","areeda","mzevin1","RF45","jrsmith02","sbc538")
collaborators <- c("adamamiller","olipatane","smarttiz","jafeldt","mcoughlin","citizenscientist1994","cjackso3",
"camallen","lmp579","sciencejedi","crowston","Carsten","jessiemcd","ejm553","srallen",
"costerlu@syr.edu","lcalian","joeykey","matsoulina","trouille","zooniverse")
moderators <- c("achilles308","futurewaves","wavewavewave","EcceruElme")
# Data on research drive folder /Volumes/cbjackson2/motif. Remeber to connect to VPN and mount drive
user_motifs <- read_csv("/Volumes/cbjackson2/motif/user_level_motif.csv")
user_motifs <- user_motifs[which(!user_motifs$type %in% c("otheruser","superuser") ),]
user_motifs$type <- recode(user_motifs$type, promoted = "promoted", detractor = "notpromoted",.default = NA_character_)
user_motifs$user_id <- as.factor(user_motifs$user_id)
########################  Add classification accuracy and total activities
user_performance <- read_csv("/Volumes/cbjackson2/motif/user_performance.csv")
user_performance[,c(1,9:10)] <- NULL
names(user_performance)[c(1,3,4)] <- c("user_id","start_session","end_session")
user_performance$user_id <- as.factor(user_performance$user_id)
setwd("~/Desktop/GitHub Code/motifs")
# What modes of action. How many different motifs are present for a volunteer
user_summary_sets <- user_motifs %>%
group_by(user_id) %>%
summarize(
distinct_set = length(unique(set1)),
total_sets = length(set1),
set_diversiy = total_sets/distinct_set)
### ALL MOTIFS
user_level_sets <- user_motifs %>%
group_by(user_id,level) %>%
summarize(
distinct_set = length(unique(set1)),
total_sets = length(set1),
set_diversiy = total_sets/distinct_set,
sessions = length(unique(start_time)),
first_l1set = min(start_time),
last_l1set = max(start_time),
) %>%
mutate(level_time =  difftime(last_l1set,first_l1set,units = "mins"))
##### LEVEL 1 MOTIFS #####
library(data.table)
l1user_sets <-  data.table(user_level_sets[which(user_level_sets$level==1),])
l1user_sets <- l1user_sets %>%  select(user_id, level, distinct_set, total_sets) %>%
mutate(
distinct_sets.s = scale(distinct_set),
total_sets.s = scale(total_sets),
sets_diversity.s = scale(total_sets),
sets_diversity.s2 = total_sets.s*distinct_sets.s,
average.z = (distinct_sets.s + (total_sets.s)) / 2
)
### ALL MOTIFS BY TYPE
user_level_type_sets <- user_motifs %>%
group_by(user_id,level,type) %>%
summarize(
distinct_sets = length(unique(set1)),
total_sets = length(set1),
set_diversiy = total_sets/distinct_sets
)
library(data.table)
l1usertype_sets <-  data.table(user_level_type_sets[which(user_level_type_sets$level==1),])
l1usertype_sets <- l1usertype_sets %>%  select(user_id, level, distinct_sets, total_sets, type) %>%
mutate(
distinct_sets.s = scale(distinct_sets),
total_sets.s = scale(total_sets),
sets_diversity.s = scale(total_sets),
sets_diversity.s2 = total_sets.s*distinct_sets.s,
average.z = (distinct_sets.s + (total_sets.s)) / 2
)
### ALL MOTIFS BY USER in L1
allL1sets <- user_motifs[which(user_motifs$level==1),]
allL1_summary <- allL1sets %>%
group_by(user_id,type) %>%
summarize(
start_level = min(start_time),
distinct_sets = length(unique(set1)),
total_sets = length(set1),
set_diversiy = total_sets/distinct_sets
)
allL1_sets_type_summary <- allL1sets %>%
group_by(user_id,set1,type) %>%
summarize(
total_sets = length(set1)
)
allL1_set_summary <- allL1sets %>%
group_by(user_id,set1,type) %>%
summarize(
first_l1set = min(start_time),
last_l1set = max(start_time),
distinct_motif_combinations = length(unique(motif)),
total_motif = length(motif)
)
user_summary_sets <- user_motifs %>%
group_by(user_id) %>%
summarize(
distinct_set = length(unique(set1)),
total_sets = length(set1),
set_diversiy = total_sets/distinct_set)
View(user_summary_sets)
View(user_motifs)
book_words <- user_motifs %>%
count(level, set1, sort = TRUE)
View(book_words)
total_motifs <- project_motifs %>%
group_by(level) %>%
summarize(total = sum(n))
project_motifs <- user_motifs %>%
count(level, set1, sort = TRUE)
total_motifs <- project_motifs %>%
group_by(level) %>%
summarize(total = sum(n))
project_motifs <- left_join(project_motifs, total_motifs)
View(project_motifs)
ggplot(project_motifs, aes(n/total, fill = level)) +
geom_histogram(show.legend = FALSE) +
xlim(NA, 0.0009) +
facet_wrap(~level, ncol = 2, scales = "free_y")
freq_by_rank <- project_motifs %>%
group_by(level) %>%
mutate(rank = row_number(),
`term frequency` = n/total) %>%
ungroup()
View(freq_by_rank)
freq_by_rank.viz %>%
ggplot(aes(rank, `term frequency`, color = book)) +
geom_line(size = 1.1, alpha = 0.8, show.legend = FALSE) +
scale_x_log10() +
scale_y_log10()
freq_by_rank.viz <- freq_by_rank %>%
ggplot(aes(rank, `term frequency`, color = book)) +
geom_line(size = 1.1, alpha = 0.8, show.legend = FALSE) +
scale_x_log10() +
scale_y_log10()
freq_by_rank.viz
freq_by_rank.viz <- freq_by_rank %>%
ggplot(aes(rank, `term frequency`, color = level)) +
geom_line(size = 1.1, alpha = 0.8, show.legend = FALSE) +
scale_x_log10() +
scale_y_log10()
freq_by_rank.viz
project_tf_idf <- project_motifs %>%
bind_tf_idf(set1, level, n)
View(project_tf_idf)
project_tf_idf %>%
group_by(level) %>%
slice_max(tf_idf, n = 15) %>%
ungroup() %>%
ggplot(aes(tf_idf, fct_reorder(set1, tf_idf), fill = level)) +
geom_col(show.legend = FALSE) +
facet_wrap(~level, ncol = 2, scales = "free") +
labs(x = "tf-idf", y = NULL)
project_tf_idf %>%
group_by(level) %>%
slice_max(tf_idf, n = 15) %>%
ungroup() %>%
ggplot(aes(tf_idf, fct_reorder(set1, tf_idf), fill = level)) +
geom_col(show.legend = FALSE) +
facet_wrap(~level, ncol = 4, scales = "free") +
labs(x = "tf-idf", y = NULL)
project_tf_idf %>%
group_by(level) %>%
slice_max(tf_idf, n = 15) %>%
ungroup() %>%
ggplot(aes(tf_idf, fct_reorder(set1, tf_idf), fill = level)) +
geom_col(show.legend = FALSE) +
facet_wrap(~level, ncol = 1, scales = "free") +
labs(x = "tf-idf", y = NULL)
project_tf_idf %>%
group_by(level) %>%
slice_max(tf_idf, n = 15) %>%
ungroup() %>%
ggplot(aes(tf_idf, fct_reorder(set1, tf_idf), fill = level)) +
geom_col(show.legend = FALSE) +
facet_wrap(~level, ncol = 1, scales = "free") +
labs(x = "tf-idf", y = NULL)
project_tf_idf %>%
group_by(level) %>%
slice_max(tf_idf, n = 15) %>%
ungroup() %>%
ggplot(aes(tf_idf, fct_reorder(set1, tf_idf), fill = level)) +
geom_col(show.legend = FALSE) +
facet_wrap(~level, ncol = 1, scales = "free") +
labs(x = "tf-idf", y = NULL) +
theme(aspect.ratio=4/3)
project_tf_idf %>%
group_by(level) %>%
slice_max(tf_idf, n = 15) %>%
ungroup() %>%
ggplot(aes(tf_idf, fct_reorder(set1, tf_idf), fill = level)) +
geom_col(show.legend = FALSE) +
facet_wrap(~level, ncol = 1, scales = "free") +
labs(x = "tf-idf", y = NULL) +
theme(aspect.ratio=5/4)
project_tf_idf %>%
group_by(level) %>%
slice_max(tf_idf, n = 15) %>%
ungroup() %>%
ggplot(aes(tf_idf, fct_reorder(set1, tf_idf), fill = level)) +
geom_col(show.legend = FALSE) +
facet_wrap(~level, ncol = 1, scales = "free") +
labs(x = "tf-idf", y = NULL) +
theme(aspect.ratio=10/4)
project_tf_idf %>%
group_by(level) %>%
slice_max(tf_idf, n = 15) %>%
ungroup() %>%
ggplot(aes(tf_idf, fct_reorder(set1, tf_idf), fill = level)) +
geom_col(show.legend = FALSE) +
facet_wrap(~level, ncol = 1, scales = "free") +
labs(x = "tf-idf", y = NULL) +
theme(aspect.ratio=10/5)
project_tf_idf %>%
group_by(level) %>%
slice_max(tf_idf, n = 10) %>%
ungroup() %>%
ggplot(aes(tf_idf, fct_reorder(set1, tf_idf), fill = level)) +
geom_col(show.legend = FALSE) +
facet_wrap(~level, ncol = 1, scales = "free") +
labs(x = "tf-idf", y = NULL) +
theme(aspect.ratio=10/5)
